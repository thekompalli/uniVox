{
  "info": {
    "name": "PS-06 Competition System - Local Testing",
    "description": "API collection for testing PS-06 system locally",
    "version": "1.0.0"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "job_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": "{{base_url}}/api/v1/health",
        "description": "Check if the API server is running and healthy"
      },
      "response": []
    },
    {
      "name": "System Info",
      "request": {
        "method": "GET", 
        "header": [],
        "url": "{{base_url}}/",
        "description": "Get basic system information"
      },
      "response": []
    },
    {
      "name": "Model Information",
      "request": {
        "method": "GET",
        "header": [],
        "url": "{{base_url}}/api/v1/models/info",
        "description": "Get information about loaded models"
      },
      "response": []
    },
    {
      "name": "Process Audio File",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "audio_file",
              "type": "file",
              "src": "/path/to/your/audio/file.wav",
              "description": "Upload an audio file (WAV, MP3, OGG, FLAC)"
            },
            {
              "key": "languages",
              "value": "english,hindi,punjabi",
              "type": "text",
              "description": "Comma-separated list of expected languages"
            },
            {
              "key": "quality_mode",
              "value": "balanced",
              "type": "text",
              "description": "Processing quality: fast, balanced, high, ultra"
            }
          ]
        },
        "url": "{{base_url}}/api/v1/process",
        "description": "Upload and process an audio file through the complete pipeline"
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// Save job_id from response for other requests",
              "if (pm.response.code === 200) {",
              "    const response = pm.response.json();",
              "    if (response.data && response.data.job_id) {",
              "        pm.collectionVariables.set('job_id', response.data.job_id);",
              "        console.log('Job ID saved:', response.data.job_id);",
              "    }",
              "}"
            ]
          }
        }
      ]
    },
    {
      "name": "Get Job Status", 
      "request": {
        "method": "GET",
        "header": [],
        "url": "{{base_url}}/api/v1/status/{{job_id}}",
        "description": "Check the status of a processing job"
      },
      "response": []
    },
    {
      "name": "Get Processing Results",
      "request": {
        "method": "GET",
        "header": [],
        "url": "{{base_url}}/api/v1/result/{{job_id}}",
        "description": "Get the complete processing results for a job"
      },
      "response": []
    },
    {
      "name": "List All Jobs",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/v1/jobs",
          "host": ["{{base_url}}"],
          "path": ["api", "v1", "jobs"],
          "query": [
            {
              "key": "limit",
              "value": "10",
              "description": "Number of jobs to return"
            },
            {
              "key": "offset", 
              "value": "0",
              "description": "Starting position for pagination"
            }
          ]
        },
        "description": "List all processing jobs with pagination"
      },
      "response": []
    },
    {
      "name": "Delete Job",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": "{{base_url}}/api/v1/job/{{job_id}}",
        "description": "Delete a job and its associated files"
      },
      "response": []
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "console.log('Running PS-06 API request...');"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "exec": [
          "// Common test for all requests",
          "pm.test('Response time is reasonable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has correct content type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});"
        ]
      }
    }
  ]
}